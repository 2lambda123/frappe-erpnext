{% macro product_image_square(website_image, css_class="") %}
<div class="product-image product-image-square
	{% if not website_image -%} missing-image {%- endif %} {{ css_class }}"
	{% if website_image -%}
	style="background-image: url('{{ frappe.utils.quoted(website_image) | abs_url }}');"
	{%- endif %}>
</div>
{% endmacro %}



{% macro product_image(website_image, css_class="") %}
    <div class="border text-center rounded h-100 {{ css_class }}" style="overflow: hidden;">
		<img itemprop="image" class="website-image h-100 w-100" src="{{ frappe.utils.quoted(website_image or 'no-image.jpg') | abs_url }}">
    </div>
{% endmacro %}



{% macro media_image(website_image, name, css_class="") %}
	<div class="product-image sidebar-image-wrapper {{ css_class }}">
		{% if not website_image -%}
		<div class="sidebar-standard-image"> <div class="standard-image" style="background-color: rgb(250, 251, 252);">{{name}}</div> </div>
		{%- endif %}
    	{% if website_image -%}
			<a href="{{ frappe.utils.quoted(website_image) }}">
				<img itemprop="image" src="{{ frappe.utils.quoted(website_image) | abs_url }}"
					class="img-responsive img-thumbnail sidebar-image" style="min-height:100%; min-width:100%;">
			</a>
    	{%- endif %}
    </div>
{% endmacro %}



{% macro render_webpage_section(section) %}
{% if section.section_based_on == 'Custom HTML' %}
	{{ section.section_html }}
{% else %}
<section class="container my-5">
	{% if section.is_important %}
	<h1>{{ section.name }}</h1>
	{% else %}
	<h2>{{ section.name }}</h2>
	{% endif %}

	<div class="row">

	{% if section.section_based_on == 'Card Group' %}
	<div class="card-group">
	{% elif section.section_based_on == 'Card Deck' %}
	<div class="card-deck">
	{% elif section.section_based_on == 'Card Columns' %}
	<div class="card-columns">
	{% endif %}

	{% for item in section.items %}
		{% if section.section_based_on == 'Grid' %}
		<div class="col-md-{{ section.column_value }} mb-4">
		{% endif %}

			{% if item.render_as == 'Vertical Card' %}
			{{ render_vcard(item.title, item.subtitle, item.image, item.content, item.route, item.route_text, item.route_rel) }}
			{% elif item.render_as == 'Horizontal Card' %}
			{{ render_hcard(item.title, item.subtitle, item.image, item.content, item.route, item.route_text, item.route_rel) }}
			{% endif %}

		{% if section.section_based_on == 'Grid' %}
		</div>
		{% endif %}
	{% endfor %}

	{% if section.section_based_on in ['Card Group', 'Card Deck', 'Card Columns'] %}
	</div>
	{% endif %}

	</div> <!-- row -->
</section>
{% endif %}
{% endmacro %}



{% macro render_vcard(title, subtitle, image, content, route, route_text, route_rel) %}
<div class="card">
{% if image %}
{% if route %}
	<a class="no-underline" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
{% endif %}
	<div class="website-image-lazy" data-class="card-img-top" data-src="{{ image }}" data-alt="{{ title }}"></div>
{% if route %}
	</a>
{% endif %}
{% endif %}
	<div class="card-body">
		<h3 class="card-title">
		{% if route %}
			<a class="text-dark" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
		{%- endif -%}
			{{ title }}
		{%- if route -%}
			</a>
		{% endif %}
		</h3>
	{% if subtitle %}
		<h4 class="card-subtitle mb-2 text-muted">{{ subtitle }}</h4>
	{% endif %}
		<p class="card-text">{{ content or '' | truncate(140, True) }}</p>
	{% if route %}
		<a class="card-link" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
			{{- route_text or _('More details') }}</a>
	{% endif %}
	</div>
</div>
{% endmacro %}

{% macro render_hcard(title, subtitle, image, content, route, route_text, route_rel, image_right=false) %}
<div class="card">
	<div class="row no-gutters">
		<div class="col-md-3{% if image_right %} order-md-12{% endif %}">
		{% if image %}
		{% if route %}
			<a class="no-underline" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
		{% endif %}
			<div class="website-image-lazy" data-class="card-img p-2" data-src="{{ image }}" data-alt="{{ title }}"></div>
		{% if route %}
			</a>
		{% endif %}
		{% endif %}
		</div>
		<div class="col-md-9{% if image_right %} order-md-1{% endif %}">
			<div class="card-body">
				<h3 class="card-title">
				{% if route %}
					<a class="text-dark" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
				{%- endif -%}
					{{ title }}
				{%- if route -%}
					</a>
				{% endif %}
				</h3>
			{% if subtitle %}
				<h4 class="card-subtitle mb-2 text-muted">{{ subtitle }}</h4>
			{% endif %}
				<p class="card-text">{{ content or '' | truncate(140, True) }}</p>
			{% if route %}
				<a class="card-link" href="{{ route }}"{% if route_rel %} rel="{{ route_rel }}"{% endif %}{% if 'external' in route_rel %} target="_blank"{% endif %}>
					{{- route_text or _('More details') }}</a>
			{% endif %}
			</div>
		</div>
	</div>
</div>
{% endmacro %}
